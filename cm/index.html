<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Color Match</title>
    <link rel="stylesheet" href="style.css">
        <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@200;300;400;500;700;800;900&display=swap" rel="stylesheet">
    </head>
<body dir="rtl">
    <div class="game-container">
        <h1 class="game-title">لعبة تخمين الألوان</h1>
        <p id="message" class="game-message">
            انقر على مربع ثم اختر لونًا من لوحة الألوان.
        </p>
        <div id="game-area" class="game-area">
            <div id="square-0" class="game-square" data-index="0"></div>
            <div id="square-1" class="game-square" data-index="1"></div>
            <div id="square-2" class="game-square" data-index="2"></div>
            <div id="square-3" class="game-square" data-index="3"></div>
            <div id="square-4" class="game-square" data-index="4"></div>
        </div>
        <div id="color-palette" class="color-palette">
            <div class="color-choice diamond" data-color="diamond" title="الماس (أزرق)"></div>
            <div class="color-choice gold" data-color="gold" title="الذهبي (أصفر)"></div>
            <div class="color-choice custom-light" data-color="custom-light" title="لون فاتح مخصص"></div>
            <div class="color-choice green" data-color="green" title="الأخضر"></div>
            <div class="color-choice dark-gray" data-color="dark-gray" title="رمادي داكن"></div>
        </div>
        <div class="game-buttons">
            <button id="check-button" class="game-button check-button">
                تحقق
            </button>
            <button id="surrender-button" class="game-button surrender-button">
                استسلام
            </button>
            <button id="reset-button" class="game-button reset-button">
                إعادة اللعبة
            </button>
        </div>
    </div>
    <script src="script.js"></script>

    <script>
// Get DOM elements
// Get DOM elements
        const squareElements = [
            document.getElementById('square-0'),
            document.getElementById('square-1'),
            document.getElementById('square-2'),
            document.getElementById('square-3'),
            document.getElementById('square-4')
        ];
        const colorPalette = document.getElementById('color-palette');
        const messageElement = document.getElementById('message');
        const checkButton = document.getElementById('check-button');
        const surrenderButton = document.getElementById('surrender-button');
        const resetButton = document.getElementById('reset-button');

        // Define available colors and their custom class names
        const colors = {
            diamond: { name: 'الماس (أزرق)', class: 'diamond' },
            gold: { name: 'الذهبي (أصفر)', class: 'gold' },
            'custom-light': { name: 'لون فاتح مخصص', class: 'custom-light' },
            green: { name: 'الأخضر', class: 'green' },
            'dark-gray': { name: 'رمادي داكن', class: 'dark-gray' }
        };
        const colorKeys = Object.keys(colors);
        const numberOfSquares = 5;

        let hiddenColors = [];
        let userGuesses = Array(numberOfSquares).fill(null);
        let gameActive = true;
        let selectedSquareIndex = null;

        function resetGame() {
            hiddenColors = Array.from({ length: numberOfSquares }, () => colorKeys[Math.floor(Math.random() * colorKeys.length)]);
            userGuesses = Array(numberOfSquares).fill(null);
            gameActive = true;
            selectedSquareIndex = null;
            messageElement.textContent = 'انقر على مربع ثم اختر لونًا من لوحة الألوان.';
            
            squareElements.forEach(square => {
                square.classList.remove('selected');
                Object.values(colors).forEach(color => {
                    square.classList.remove(color.class);
                });
                square.classList.add('game-square');
            });
        }

        function handleSquareClick(event) {
            if (!gameActive) return;

            if (selectedSquareIndex !== null) {
                squareElements[selectedSquareIndex].classList.remove('selected');
            }

            const clickedSquare = event.target;
            selectedSquareIndex = parseInt(clickedSquare.dataset.index);
            clickedSquare.classList.add('selected');
            messageElement.textContent = 'اختر لونًا من لوحة الألوان للمربع المحدد.';
        }

        function handleColorChoice(event) {
            if (!gameActive || selectedSquareIndex === null) {
                if (selectedSquareIndex === null) {
                    messageElement.textContent = 'الرجاء النقر على مربع أولاً لتحديده.';
                }
                return;
            }

            const clickedColorChoice = event.target.closest('.color-choice');
            if (!clickedColorChoice || !clickedColorChoice.dataset.color) {
                return;
            }

            const chosenColor = clickedColorChoice.dataset.color;
            const targetSquare = squareElements[selectedSquareIndex];

            userGuesses[selectedSquareIndex] = chosenColor;
            
            Object.values(colors).forEach(color => {
                targetSquare.classList.remove(color.class);
            });
            targetSquare.classList.add(colors[chosenColor].class);
            
            targetSquare.classList.remove('selected');
            selectedSquareIndex = null;
        }

        function checkGuesses() {
            if (!gameActive) return;
            let correctCount = 0;
            let allGuessed = true;

            squareElements.forEach((square, index) => {
                if (userGuesses[index] === null) {
                    allGuessed = false;
                } else if (userGuesses[index] === hiddenColors[index]) {
                    correctCount++;
                }
            });

            if (correctCount === numberOfSquares && allGuessed) {
                messageElement.textContent = `تهانينا!... لقد فُزْت`;
                gameActive = false;
            } else if (!allGuessed) {
                messageElement.textContent = 'الرجاء تخمين جميع المربعات قبل التحقق.';
            } else {
                messageElement.textContent = `لديك ${correctCount} تخمين صحيح`;
            }
        }

        function surrenderGame() {
            if (!gameActive) return;
            gameActive = false;
            messageElement.textContent = 'لقد استسلمت! الألوان الصحيحة هي:';
            
            squareElements.forEach((square, index) => {
                square.classList.remove('selected');
                Object.values(colors).forEach(color => {
                    square.classList.remove(color.class);
                });
                square.classList.add(colors[hiddenColors[index]].class);
            });
        }

        squareElements.forEach(square => {
            square.addEventListener('click', handleSquareClick);
        });
        colorPalette.addEventListener('click', handleColorChoice);
        checkButton.addEventListener('click', checkGuesses);
        resetButton.addEventListener('click', resetGame);
        surrenderButton.addEventListener('click', surrenderGame);

        document.addEventListener('DOMContentLoaded', resetGame);
    </script>
</body>
</html>

    